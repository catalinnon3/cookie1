{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Cookie\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Cookie\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Cookie\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Cookie\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Cookie\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Cookie\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Cookie\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Cookie\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import bridge from'@vkontakte/vk-bridge';import'@vkontakte/vkui/dist/vkui.css';import'./css/App.css';import html2canvas from'html2canvas';import{Panel,Alert,Title,Headline,View,ScreenSpinner,Button,Snackbar,platform,ANDROID}from'@vkontakte/vkui';import Icon16Chevron from'./img/chevron_16.png';import Icon28StoryOutline from'@vkontakte/icons/dist/28/story_outline';import cookieIcon from'./img/cookie.png';import paper from'./img/paper2.jpg';import bg from'./img/bg.jpg';import sugar from'./img/sugar.png';import e1 from'./img/e1.png';import e2 from'./img/e2.png';import e3 from'./img/e3.png';import e4 from'./img/e4.png';import e5 from'./img/e5.png';import e6 from'./img/e6.png';import e7 from'./img/e7.png';import e8 from'./img/e8.png';import e9 from'./img/e9.png';import e10 from'./img/e10.png';import e11 from'./img/e11.png';import Lottie from'react-lottie';import animDataCookie from'./animations/cookie.json';var random=require('random');var os=platform();var app_id=7557583,group_id=197650790,need_balance=false;var prefix='_________';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.state={popout:null,activePanel:'main',scheme:'bright_light',can_generate:true,first_loaded:false,cookieAnimStarted:true,data:{},three:null,phrases:['В жизни важно лишь одно..\\nА остальное не важно','Печенька не может предсказать твою судьбу, сделай ее сам','Гони тех кто пёрнул однажды... Кто пёрнул раз. Пёрнет и дважды!','Какой бы курицей не была девушка, запомни..\\nГлавное не стать питухом','Умные мысли всегда преследуют тебя! Но ты быстрее!','Чтобы открыть любую дверь в своей жизни.. нужно запомнить 2 фразы! \"На себя\" и \"от себя\"','Безумно можно быть пееервым','Ой, ты такой милый и красивый! Улыбнись!','Отложи свой телефон на час, посмотри в окно и улыбнись','Ты давно не общался с бабушкой или дедушкой, позвони им','Слушай свое сердце, пока оно не остановилось','Я очень устала, знаешь как сложно придумывать пожелания?','Если тебя незаслуженно обидели, вернись и заслужи','Неумение врать ещё не повод говорить правду','Не каждый может смотреть в завтрашний день, вернее не только лишь все','Что ты хочешь услышать? Я Печенька, а не философ.','Если жизнь ведет вас по самым сложным тропам - это дорога к удаче.','Уделите особое внимание старой дружбе','Слушайте каждого. Идеи приходят отовсюду.','Ты сногшибаем, как банановая кожура','Надо подкачаться, надо-надо подкачаться','У тебя скоро день рождения или уже был, или не скоро будет. С праздником','Сегодня ты получишь подарок','Иди уже в туалет, хватит терпеть','Думай о том, о чем не думаю даже те кто думает, что думает','Встань и иди туда, где ты нужен','Иди погуляй с собакой, не мучай животное','Слово не воробей, ничто не воробей кроме воробья','Сегодня именно тот день, когда надо подстричься','О-оу-и-я-и-ё! БАТАРЕЙКА....','Проживи этот день как игру','Главное - не забыть главное. А то забудешь главное, а это главное!','Не ссы в трусы, все будет Ok','Просто будь счастлив, черт побери, ты этого заслуживаешь','Не стоит идти против ветра, ведь он наркоман и он дует','Не забудь поднять крышку унитаза','Не делай поспешных выводов, делай вывошные допсеши','Не жди у моря погоды, не оно ее делает','Будь как последняя спичка - очень важным','Если тебя никто не понимает, возможно ты китаец','Не стой там где стоят все, стой там где никто не стоит','Я знаю, ты все можешь\\nP.S. Твоя Печенька','Ты утопил мою сестру в чае, ублюдок','Xiaomi - топ за свои деньги','Сегодня ты должен поесть дошика','В любой непонятной ситуации ешь дошик','Этот день сулит немного интима, иди помойся','Твоя сексуальность не знает границ, остановись, умоляю','Не стой на светофоре, кто он такой, что бы указывать тебе','Не бойся перемен, пусть перемены боятся тебя','Не стоит мерить все линейкой, возьми рулетку','Не будь п******, выключи свою колонку, когда идёшь по улице','Жизнь бьёт тебя каждый раз, когда ты встаёшь? Ползи.','Будь Колобком. Катись и радуйся жизни.','Не бойся делать ошибки, без них не будет верных решений.','Жить — это не значит дышать, это значит действовать. Сделай сегодня то, что давно боялся.','Если гора не идёт к Магомеду, то это нормально, ведь она гора.','Ты увидишь ответ на свой вопрос на дне 10-й выпитой тобой рюмки водки.','Делай что можешь, с тем что имеешь, там где ты есть.','Ваш питомец планирует сожрать вас.','Не ходите вокруг да около, идите напролом.','Если вы не сказали слова, которые стоило бы сказать, у вас слово не воробей.','Завтрашним утром поверните налево, как только выйдете из дома.','Делай сегодня то, чего не сделал вчера, ведь сделай ты это сегодня, завтра не надо будет делать.','Делай это сейчас! Ведь сегодня завтра будет вчера.','Если Вы хотите иметь то, что никогда не имели, — начните сегодня делать то, что никогда не делали','Ты уникален, так же, как и все остальные.','Нет безвыходных ситуаций: даже если вас съели, у вас, по крайней мере, есть два выхода.','В ближайшее время ты подкачаешься!\\nОтожмись 5 раз и прочти это еще раз...']};_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));_this.go=_this.go.bind(_assertThisInitialized(_this));_this.shareStory=_this.shareStory.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this2=this;var user;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:bridge.subscribe(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$detail,type,data,schemeAttribute,shapes,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,element;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;if(type!==undefined)console.log(type,data);if(!(type==='VKWebAppUpdateConfig')){_context.next=10;break;}schemeAttribute=document.createAttribute('scheme');schemeAttribute.value=false?data.scheme?data.scheme:'bright_light':'bright_light';document.body.attributes.setNamedItem(schemeAttribute);_this2.setState({scheme:schemeAttribute.value});if(bridge.supports('VKWebAppSetViewSettings')){bridge.send('VKWebAppSetViewSettings',{status_bar_style:'light',action_bar_color:'none'});}_context.next=32;break;case 10:if(!(type==='VKWebAppViewRestore')){_context.next=32;break;}_this2.setState({popout:null,screen:false});shapes=document.getElementsByClassName('bg_shape_container');_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=16;for(_iterator=shapes[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){element=_step.value;try{console.log('delete',element);element.remove();}catch(e){console.error(e);}}_context.next=24;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](16);_didIteratorError=true;_iteratorError=_context.t0;case 24:_context.prev=24;_context.prev=25;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}case 27:_context.prev=27;if(!_didIteratorError){_context.next=30;break;}throw _iteratorError;case 30:return _context.finish(27);case 31:return _context.finish(24);case 32:case\"end\":return _context.stop();}}},_callee,null,[[16,20,24,32],[25,,27,31]]);}));return function(_x){return _ref2.apply(this,arguments);};}());_context2.next=3;return bridge.sendPromise('VKWebAppGetUserInfo');case 3:user=_context2.sent;this.setState({photo:user.photo_max_orig,name:user.first_name+' '+user.last_name});this.initializeTimer();_context2.next=8;return this.updateStorage();case 8:_context2.next=10;return bridge.send('VKWebAppInit');case 10:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"updateStorage\",value:function(){var _updateStorage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var keys1,keys2,sValues,data,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,value,nmbr;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:keys1=['used1','used2','used3'],keys2=['balance','share_story','allow_msg','share_wall',/*'sub_group',*/'allow_noty','got_free'];_context3.next=3;return bridge.sendPromise('VKWebAppStorageGet',{keys:need_balance?(keys2.join(prefix+',')+prefix).split(','):(keys1.join(prefix+',')+prefix).split(',')});case 3:sValues=_context3.sent;sValues=sValues.keys;data={};_context3.prev=6;_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context3.prev=10;for(_iterator2=sValues[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){value=_step2.value;nmbr=Number(value.value);data[value.key]=value.value=='true'||value.value=='false'?value.value=='true':nmbr>0?nmbr:value.value;}_context3.next=18;break;case 14:_context3.prev=14;_context3.t0=_context3[\"catch\"](10);_didIteratorError2=true;_iteratorError2=_context3.t0;case 18:_context3.prev=18;_context3.prev=19;if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return();}case 21:_context3.prev=21;if(!_didIteratorError2){_context3.next=24;break;}throw _iteratorError2;case 24:return _context3.finish(21);case 25:return _context3.finish(18);case 26:_context3.next=31;break;case 28:_context3.prev=28;_context3.t1=_context3[\"catch\"](6);console.error('e3',_context3.t1);case 31:this.setState({data:data,sValues:sValues});console.log(data);if(!(data['got_free'+prefix]===false||Date.now()-data['got_free'+prefix]>=2*60*60*1000)){_context3.next=40;break;}_context3.next=36;return bridge.sendPromise('VKWebAppStorageSet',{key:'got_free'+prefix,value:Date.now().toString()});case 36:_context3.next=38;return bridge.sendPromise('VKWebAppStorageSet',{key:'balance'+prefix,value:data['got_free'+prefix]===false?'1':(data['balance'+prefix]+1).toString()});case 38:_context3.next=40;return this.updateStorage();case 40:return _context3.abrupt(\"return\");case 41:case\"end\":return _context3.stop();}}},_callee3,this,[[6,28],[10,14,18,26],[19,,21,25]]);}));function updateStorage(){return _updateStorage.apply(this,arguments);}return updateStorage;}()},{key:\"go\",value:function go(panel){this.setState({activePanel:panel});}},{key:\"sleep\",value:function sleep(ms){return new Promise(function(resolve){return setTimeout(resolve,ms);});}},{key:\"initializeTimer\",value:function initializeTimer(){var _this3=this;var imgs=[e1,e2,e3,e4,e5,e6,e7,e8,e9,e10,e11];setInterval(function(){try{if(_this3.state.screen)return;var shape_container=document.createElement('div');shape_container.className='bg_shape_container';var shape=document.createElement('img');shape.crossOrigin='anonymous';shape.className='bg_shape light_outline';shape.src=imgs[_this3.random(0,imgs.length)];shape.style.left=_this3.random(-15,90)+'vw';shape.style.height='10vh';shape.style.width='10vh';shape_container.appendChild(shape);document.getElementById('bg_shapes').appendChild(shape_container);for(var i=0;i<5;i++){shape.style.setProperty('--offset-x-'+i,_this3.random(-20,20)+'vw');}setTimeout(function(){try{shape_container.remove();}catch(e){}},10000);}catch(e){}},600);}},{key:\"random\",value:function random(min,max){return Math.floor(Math.random()*(max-min)+min);}},{key:\"viewportToPixels\",value:function viewportToPixels(value){var parts=value.match(/([0-9\\.]+)(vh|vw)/);var q=Number(parts[1]);var side=window[['innerHeight','innerWidth'][['vh','vw'].indexOf(parts[2])]];return side*(q/100);}},{key:\"convertMiliseconds\",value:function convertMiliseconds(miliseconds){var days,hours,minutes,seconds,total_hours,total_minutes,total_seconds;total_seconds=parseInt(Math.floor(miliseconds/1000));total_minutes=parseInt(Math.floor(total_seconds/60));total_hours=parseInt(Math.floor(total_minutes/60));days=parseInt(Math.floor(total_hours/24));seconds=parseInt(total_seconds%60);minutes=parseInt(total_minutes%60);hours=parseInt(total_hours%24);return hours+'ч. '+minutes+'мин.';}},{key:\"shareStory\",value:function(){var _shareStory=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(add){var _this4=this;var element;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;this.setState({popout:React.createElement(ScreenSpinner,null),screen:true});_context5.next=4;return this.sleep(750);case 4:element=document.getElementById('main');html2canvas(element,{allowTaint:true}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(canvas){var blob;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this4.setState({screen:false});_context4.next=3;return _this4.sleep(250);case 3:blob=canvas.toDataURL('image/png');_context4.prev=4;_context4.next=7;return bridge.send('VKWebAppShowStoryBox',{background_type:'image',blob:blob,attachment:{url:'https://vk.com/app'+app_id,text:'open',type:'url'}});case 7:_this4.setState({shared:true});if(!add){_context4.next=15;break;}_context4.next=11;return bridge.sendPromise('VKWebAppStorageSet',{key:'balance'+prefix,value:(_this4.state.data['balance'+prefix]+1).toString()});case 11:_context4.next=13;return bridge.sendPromise('VKWebAppStorageSet',{key:'share_story'+prefix,value:Date.now().toString()});case 13:_context4.next=15;return _this4.updateStorage();case 15:_context4.next=19;break;case 17:_context4.prev=17;_context4.t0=_context4[\"catch\"](4);case 19:_this4.setState({popout:null});case 20:case\"end\":return _context4.stop();}}},_callee4,null,[[4,17]]);}));return function(_x3){return _ref3.apply(this,arguments);};}());_context5.next=13;break;case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](0);console.error(_context5.t0);this.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this4.setState({snackbar:null});}},\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\")});this.setState({popout:null,screen:false});case 13:case\"end\":return _context5.stop();}}},_callee5,this,[[0,8]]);}));function shareStory(_x2){return _shareStory.apply(this,arguments);}return shareStory;}()},{key:\"render\",value:function render(){var _this5=this;return React.createElement(View,{activePanel:this.state.activePanel,popout:this.state.popout},React.createElement(Panel,{id:\"main\",style:{zIndex:1}},React.createElement(\"div\",{className:'animated-background',style:{width:'100vw',height:'100vh',background:this.state.screen&&\"url(\".concat(bg,\")\")}},React.createElement(\"div\",{id:\"bg_shapes\"}),!this.state.screen&&need_balance&&React.createElement(\"div\",{style:{position:'absolute',top:os===ANDROID?'6vh':'3vh',left:'6vw'},className:\"centered\"},React.createElement(Headline,{weight:\"bold\",style:{color:'white'}},\"\\u0411\\u0430\\u043B\\u0430\\u043D\\u0441: \",this.state.data['balance'+prefix]>0?this.state.data['balance'+prefix]:0),React.createElement(\"img\",{style:{marginLeft:8},src:sugar,height:32})),React.createElement(\"div\",{className:\"absolute_centered\",style:{transform:'translate(-50%, -70%)'}},React.createElement(\"div\",{className:'centered_',style:{position:'absolute',top:'10vh',width:'100%',color:'white',textAlign:'center'}},false&&React.createElement(\"img\",{src:cookieIcon,style:{marginRight:8,display:this.state.screen||need_balance&&'none'},height:32}),React.createElement(Title,{level:\"1\",style:{fontFamily:'Font',fontWeight:'400',letterSpacing:'2px',fontSize:'28px'}},this.state.screen&&'Моё предсказание из печеньки на сегодня'.toUpperCase())),React.createElement(Lottie,{style:{pointerEvents:'none',zIndex:-1,opacity:this.state.showText&&.5},options:{animationData:animDataCookie,rendererSettings:{preserveAspectRatio:'xMidYMid slice'}},width:this.viewportToPixels('90vw'),isStopped:this.state.cookieAnimStarted}),React.createElement(\"div\",{className:\"absolute_centered\",style:{backgroundImage:\"url(\".concat(paper,\")\"),backgroundRepeat:'repeat',display:!this.state.showText&&'none',borderRadius:this.viewportToPixels('1vh')}},React.createElement(Headline,{weight:\"bold\",style:{padding:'16px',width:'70vw',textAlign:'center'}},React.createElement(\"div\",{dangerouslySetInnerHTML:{__html:this.state.phrase}}))),!this.state.screen&&React.createElement(Button,{disabled:!this.state.cookieAnimStarted,size:'xl',style:{backgroundColor:'white',color:'black'},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var last;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!need_balance){_context7.next=12;break;}if(!(_this5.state.data['balance'+prefix]>0)){_context7.next=8;break;}_context7.next=4;return bridge.sendPromise('VKWebAppStorageSet',{key:'balance'+prefix,value:(_this5.state.data['balance'+prefix]-1).toString()});case 4:_context7.next=6;return _this5.updateStorage();case 6:_context7.next=10;break;case 8:_this5.setState({popout:React.createElement(Alert,{actions:[{title:'Получить сахар',autoclose:true,action:function(){var _action=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_this5.setState({snackbar:null});if(!((!_this5.state.data['share_story'+prefix]||_this5.state.data['share_story'+prefix]>0&&Date.now()-_this5.state.data['share_story'+prefix]>=24*60*60*1000)&&_this5.state.showText)){_context6.next=7;break;}console.log('share_story');_context6.next=5;return _this5.shareStory(true);case 5:_context6.next=64;break;case 7:if(_this5.state.data['allow_msg'+prefix]){_context6.next=25;break;}console.log('allow_msg');_context6.prev=9;_context6.next=12;return bridge.sendPromise('VKWebAppAllowMessagesFromGroup',{group_id:group_id,key:'dBuBKe1kFcdemzB'});case 12:_context6.next=14;return bridge.sendPromise('VKWebAppStorageSet',{key:'balance'+prefix,value:(_this5.state.data['balance'+prefix]+1).toString()});case 14:_context6.next=16;return bridge.sendPromise('VKWebAppStorageSet',{key:'allow_msg'+prefix,value:'true'});case 16:_context6.next=18;return _this5.updateStorage();case 18:_this5.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this5.setState({snackbar:null});}},\"\\u0412\\u044B \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u043B\\u0438 1 \\u0441\\u0430\\u0445\\u0430\\u0440\")});_context6.next=23;break;case 21:_context6.prev=21;_context6.t0=_context6[\"catch\"](9);case 23:_context6.next=64;break;case 25:if(_this5.state.data['share_wall'+prefix]){_context6.next=43;break;}console.log('share_wall');_context6.prev=27;_context6.next=30;return bridge.sendPromise('VKWebAppShowWallPostBox',{message:'Открой свою печеньку 👉 vk.com/app'+app_id,attachments:'photo-197650774_457239017'});case 30:_context6.next=32;return bridge.sendPromise('VKWebAppStorageSet',{key:'balance'+prefix,value:(_this5.state.data['balance'+prefix]+1).toString()});case 32:_context6.next=34;return bridge.sendPromise('VKWebAppStorageSet',{key:'share_wall'+prefix,value:'true'});case 34:_context6.next=36;return _this5.updateStorage();case 36:_this5.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this5.setState({snackbar:null});}},\"\\u0412\\u044B \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u043B\\u0438 1 \\u0441\\u0430\\u0445\\u0430\\u0440\")});_context6.next=41;break;case 39:_context6.prev=39;_context6.t1=_context6[\"catch\"](27);case 41:_context6.next=64;break;case 43:if(_this5.state.data['allow_noty'+prefix]){_context6.next=61;break;}console.log('allow_noty');_context6.prev=45;_context6.next=48;return bridge.sendPromise('VKWebAppAllowNotifications',{});case 48:_context6.next=50;return bridge.sendPromise('VKWebAppStorageSet',{key:'balance'+prefix,value:(_this5.state.data['balance'+prefix]+1).toString()});case 50:_context6.next=52;return bridge.sendPromise('VKWebAppStorageSet',{key:'allow_noty'+prefix,value:'true'});case 52:_context6.next=54;return _this5.updateStorage();case 54:_this5.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this5.setState({snackbar:null});}},\"\\u0412\\u044B \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u043B\\u0438 1 \\u0441\\u0430\\u0445\\u0430\\u0440\")});_context6.next=59;break;case 57:_context6.prev=57;_context6.t2=_context6[\"catch\"](45);case 59:_context6.next=64;break;case 61:_context6.next=63;return _this5.sleep(100);case 63:_this5.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this5.setState({snackbar:null});}},\"\\u0411\\u0435\\u0441\\u043F\\u043B\\u0430\\u0442\\u043D\\u044B\\u0439 \\u0441\\u0430\\u0445\\u0430\\u0440 \\u0437\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u043B\\u0441\\u044F. \\u0412\\u043E\\u0437\\u0432\\u0440\\u0430\\u0449\\u0430\\u0439\\u0442\\u0435\\u0441\\u044C \\u0447\\u0435\\u0440\\u0435\\u0437 2 \\u0447\\u0430\\u0441\\u0430.\")});case 64:case\"end\":return _context6.stop();}}},_callee6,null,[[9,21],[27,39],[45,57]]);}));function action(){return _action.apply(this,arguments);}return action;}()}],onClose:function onClose(){return _this5.setState({popout:null});}},React.createElement(\"span\",{className:'centered',style:{textAlign:'center'}},React.createElement(Title,{level:2,weight:\"bold\"},\"\\u0423\\u043F\\u0441\"),React.createElement(\"img\",{src:e2,style:{marginLeft:8},height:24})),React.createElement(\"span\",{className:'centered',style:{textAlign:'center'}},React.createElement(\"p\",null,\"\\u0423 \\u0412\\u0430\\u0441 \\u043D\\u0435\\u0434\\u043E\\u0441\\u0442\\u0430\\u0442\\u043E\\u0447\\u043D\\u043E\"),React.createElement(\"img\",{src:sugar,height:32})))});return _context7.abrupt(\"return\");case 10:_context7.next=64;break;case 12:if(!(_this5.state.data['used3'+prefix]===false)){_context7.next=43;break;}if(_this5.state.data['used1'+prefix]){_context7.next=24;break;}console.log('first open');_context7.prev=15;_context7.next=18;return bridge.sendPromise('VKWebAppAllowMessagesFromGroup',{group_id:group_id,key:'dBuBKe1kFcdemzB'});case 18:_context7.next=24;break;case 20:_context7.prev=20;_context7.t0=_context7[\"catch\"](15);_this5.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this5.setState({snackbar:null});}},\"\\u041D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0441\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u0440\\u0430\\u0437\\u0440\\u0435\\u0448\\u0438\\u0442\\u044C \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u044F\")});return _context7.abrupt(\"return\");case 24:if(!_this5.state.used){_context7.next=29;break;}console.log('two open');if(_this5.state.shared){_context7.next=29;break;}_this5.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this5.setState({snackbar:null});}},\"\\u041D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0441\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u043F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F \\u0432 \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0438\")});return _context7.abrupt(\"return\");case 29:if(!_this5.state.three){_context7.next=41;break;}console.log('three open');_context7.prev=31;_context7.next=34;return bridge.sendPromise('VKWebAppShowWallPostBox',{message:'Открой свою печеньку 👉 vk.com/app'+app_id,attachments:'photo-197650774_457239017'});case 34:_this5.setState({three:false});_context7.next=41;break;case 37:_context7.prev=37;_context7.t1=_context7[\"catch\"](31);_this5.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this5.setState({snackbar:null});}},\"\\u041D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0441\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u043F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\\u044E\")});return _context7.abrupt(\"return\");case 41:_context7.next=49;break;case 43:console.log('four open');last=Date.now()-_this5.state.data['used3'+prefix];if(!(last<2*60*60*1000)){_context7.next=49;break;}console.log('need wait 2h');_this5.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this5.setState({snackbar:null});}},\"\\u0414\\u043B\\u044F \\u043F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0430 \\u043F\\u043E\\u0434\\u043E\\u0436\\u0434\\u0438\\u0442\\u0435 \",_this5.convertMiliseconds(2*60*60*1000-last))});return _context7.abrupt(\"return\");case 49:if(_this5.state.data['used1'+prefix]){_context7.next=54;break;}_context7.next=52;return bridge.sendPromise('VKWebAppStorageSet',{key:'used1'+prefix,value:Date.now().toString()});case 52:_context7.next=62;break;case 54:if(_this5.state.data['used2'+prefix]){_context7.next=60;break;}if(_this5.state.three===null)_this5.setState({three:true});_context7.next=58;return bridge.sendPromise('VKWebAppStorageSet',{key:'used2'+prefix,value:Date.now().toString()});case 58:_context7.next=62;break;case 60:_context7.next=62;return bridge.sendPromise('VKWebAppStorageSet',{key:'used3'+prefix,value:Date.now().toString()});case 62:_context7.next=64;return _this5.updateStorage();case 64:_this5.setState({cookieAnimStarted:false,showText:false});setTimeout(function(){_this5.setState({cookieAnimStarted:true,showText:true,used:true,phrase:_this5.state.phrases[random.int(0,_this5.state.phrases.length-1)].replace('\\n','<br/>')});},2250);case 66:case\"end\":return _context7.stop();}}},_callee7,null,[[15,20],[31,37]]);}))},need_balance?'Разломить за 1 ':this.state.showText?'Попробовать снова':'Разломить печеньку',\" \",need_balance&&React.createElement(\"img\",{style:{marginLeft:8},src:sugar,height:32}))),this.state.screen&&React.createElement(\"div\",{style:{position:'absolute',bottom:'18vh',width:'100vw'}},React.createElement(Title,{level:2,weight:\"semibold\",style:{color:'white',width:'100vw',textAlign:'center'}},React.createElement(\"span\",{style:{width:'80vw'}},\"\\u041F\\u0435\\u0440\\u0435\\u0445\\u043E\\u0434\\u0438 \\u0432 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C \\u043F\\u0440\\u0435\\u0434\\u0441\\u043A\\u0430\\u0437\\u0430\\u043D\\u0438\\u0435\")),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"div\",{className:'centered'},React.createElement(\"img\",{crossOrigin:'anonymous',style:{transform:'rotate(90deg)'},height:\"26px\",src:Icon16Chevron}))),this.state.showText&&!this.state.screen&&React.createElement(\"div\",{style:{position:'absolute',bottom:os===ANDROID?'8vh':'3vh',width:'100vw',zIndex:1}},React.createElement(Button,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return _this5.shareStory();case 2:case\"end\":return _context8.stop();}}},_callee8);})),style:{background:'#ffffff00',color:'white',fontSize:'20px',letterSpacing:'1px'},before:React.createElement(Icon28StoryOutline,null),size:\"xl\"},\"\\u041F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F \\u0432 \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0438\")),this.state.snackbar)));}}]);return App;}(React.Component);export default App;","map":null,"metadata":{},"sourceType":"module"}
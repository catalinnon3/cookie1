{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Cookie\\\\src\\\\App.js\";\nimport React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/App.css';\nimport html2canvas from 'html2canvas';\nimport { Panel, Title, Headline, Footer, View, SimpleCell, ScreenSpinner, Avatar, Button, Snackbar } from '@vkontakte/vkui';\nimport Icon28StoryOutline from '@vkontakte/icons/dist/28/story_outline';\nimport cookieIcon from './img/cookie.png';\nimport paper from './img/paper.jpg';\nimport Lottie from 'react-lottie';\nimport animDataCookie from './animations/cookie.json';\n\nconst random = require('random');\n\nlet app_id = 7554927,\n    group_id = 197570628;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      popout: null,\n      activePanel: 'main',\n      scheme: 'bright_light',\n      can_generate: true,\n      first_loaded: false,\n      cookieAnimStarted: true\n    };\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.go = this.go.bind(this);\n  }\n\n  async componentDidMount() {\n    bridge.subscribe(async ({\n      detail: {\n        type,\n        data\n      }\n    }) => {\n      if (type !== undefined) console.log(type, data);\n\n      if (type === 'VKWebAppUpdateConfig') {\n        const schemeAttribute = document.createAttribute('scheme');\n        schemeAttribute.value = false ? data.scheme ? data.scheme : 'bright_light' : 'bright_light';\n        document.body.attributes.setNamedItem(schemeAttribute);\n        this.setState({\n          scheme: schemeAttribute.value\n        });\n      }\n    });\n    let user = await bridge.sendPromise('VKWebAppGetUserInfo');\n    this.setState({\n      photo: user.photo_max_orig,\n      name: user.first_name + ' ' + user.last_name\n    });\n    this.initializeTimer();\n    await bridge.send('VKWebAppInit');\n  }\n\n  go(panel) {\n    this.setState({\n      activePanel: panel\n    });\n  }\n\n  sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  initializeTimer() {\n    let imgs = [cookieIcon];\n    setInterval(() => {\n      try {\n        let shape_container = document.createElement('div');\n        shape_container.className = 'bg_shape_container';\n        let shape = document.createElement('img');\n        shape.crossOrigin = 'anonymous';\n        shape.className = 'bg_shape light_outline';\n        shape.src = imgs[this.random(0, imgs.length)];\n        shape.style.left = this.random(-15, 90) + 'vw';\n        shape_container.appendChild(shape);\n        document.getElementById('bg_shapes').appendChild(shape_container);\n\n        for (let i = 0; i < 5; i++) {\n          shape.style.setProperty('--offset-x-' + i, this.random(-20, 20) + 'vw');\n        }\n\n        setTimeout(() => {\n          try {\n            shape_container.remove();\n          } catch (e) {}\n        }, 10000);\n      } catch (e) {}\n    }, 600);\n  }\n\n  random(min, max) {\n    return Math.floor(Math.random() * (max - min) + min);\n  }\n\n  viewportToPixels(value) {\n    let parts = value.match(/([0-9\\.]+)(vh|vw)/);\n    let q = Number(parts[1]);\n    let side = window[['innerHeight', 'innerWidth'][['vh', 'vw'].indexOf(parts[2])]];\n    return side * (q / 100);\n  }\n\n  render() {\n    return React.createElement(View, {\n      activePanel: this.state.activePanel,\n      popout: this.state.popout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(Panel, {\n      id: \"main\",\n      style: {\n        zIndex: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'animated-background',\n      style: {\n        width: '100vw',\n        height: '100vh'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"bg_shapes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"absolute_centered\",\n      style: {\n        transform: 'translate(-50%, -80%)'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'centered_',\n      style: {\n        position: 'absolute',\n        top: '10vh',\n        width: '100%',\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: cookieIcon,\n      style: {\n        marginRight: 8\n      },\n      height: 32,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), \" \", React.createElement(Title, {\n      level: \"1\",\n      weight: \"bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"\\u041F\\u0435\\u0447\\u0435\\u043D\\u044C\\u043A\\u0430\")), React.createElement(Lottie, {\n      style: {\n        pointerEvents: 'none',\n        zIndex: -1,\n        opacity: this.state.showText && .5\n      },\n      options: {\n        animationData: animDataCookie,\n        rendererSettings: {\n          preserveAspectRatio: 'xMidYMid slice'\n        }\n      },\n      width: this.viewportToPixels('70vw'),\n      isStopped: this.state.cookieAnimStarted,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"absolute_centered\",\n      style: {\n        backgroundImage: \"url(\".concat(paper, \")\"),\n        backgroundRepeat: 'repeat',\n        display: !this.state.showText && 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Headline, {\n      weight: \"bold\",\n      style: {\n        padding: '16px 42px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"\\u041E\\u0447\\u0435\\u043D\\u044C \\u0434\\u043B\\u0438\\u043D\\u043D\\u044B\\u0439 \\u0442\\u0435\\u043A\\u0441\\u0442 \\u043F\\u0440\\u0435\\u0434\\u0441\\u043A\\u0430\\u0437\\u0430\\u043D\\u0438\\u044F\")), React.createElement(Button, {\n      disabled: !this.state.cookieAnimStarted,\n      size: 'xl',\n      style: {\n        backgroundColor: 'white',\n        color: 'black'\n      },\n      onClick: () => {\n        this.setState({\n          cookieAnimStarted: false\n        });\n        setTimeout(() => {\n          this.setState({\n            cookieAnimStarted: true,\n            showText: true\n          });\n        }, 2250);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"\\u0420\\u0430\\u0437\\u043B\\u043E\\u043C\\u0438\\u0442\\u044C \\u043F\\u0435\\u0447\\u0435\\u043D\\u044C\\u043A\\u0443\")), React.createElement(\"div\", {\n      style: {\n        position: 'absolute',\n        bottom: '1vh',\n        width: '100vw',\n        zIndex: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/Cookie/src/App.js"],"names":["React","bridge","html2canvas","Panel","Title","Headline","Footer","View","SimpleCell","ScreenSpinner","Avatar","Button","Snackbar","Icon28StoryOutline","cookieIcon","paper","Lottie","animDataCookie","random","require","app_id","group_id","App","Component","constructor","props","state","popout","activePanel","scheme","can_generate","first_loaded","cookieAnimStarted","componentDidMount","bind","go","subscribe","detail","type","data","undefined","console","log","schemeAttribute","document","createAttribute","value","body","attributes","setNamedItem","setState","user","sendPromise","photo","photo_max_orig","name","first_name","last_name","initializeTimer","send","panel","sleep","ms","Promise","resolve","setTimeout","imgs","setInterval","shape_container","createElement","className","shape","crossOrigin","src","length","style","left","appendChild","getElementById","i","setProperty","remove","e","min","max","Math","floor","viewportToPixels","parts","match","q","Number","side","window","indexOf","render","zIndex","width","height","transform","position","top","color","marginRight","pointerEvents","opacity","showText","animationData","rendererSettings","preserveAspectRatio","backgroundImage","backgroundRepeat","display","padding","backgroundColor","bottom"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './css/App.css'\r\nimport html2canvas from 'html2canvas';\r\n\r\nimport { Panel, Title, Headline, Footer, View , SimpleCell, ScreenSpinner, Avatar , Button, Snackbar } from '@vkontakte/vkui';\r\n\r\nimport Icon28StoryOutline from '@vkontakte/icons/dist/28/story_outline';\r\n\r\nimport cookieIcon from './img/cookie.png';\r\nimport paper from './img/paper.jpg';\r\n\r\nimport Lottie from 'react-lottie'\r\nimport animDataCookie from './animations/cookie.json'\r\n\r\nconst random = require('random');\r\n\r\nlet app_id = 7554927,\r\n\tgroup_id = 197570628;\r\n\r\nclass App extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tpopout: null,\r\n\t\t\tactivePanel: 'main',\r\n\t\t\tscheme: 'bright_light',\r\n\r\n\t\t\tcan_generate: true,\r\n\t\t\tfirst_loaded: false,\r\n\t\t\tcookieAnimStarted: true\r\n\t\t};\r\n\r\n\t\tthis.componentDidMount = this.componentDidMount.bind(this);\r\n\t\tthis.go = this.go.bind(this);\r\n\t}\r\n\r\n\tasync componentDidMount () {\r\n\t\tbridge.subscribe(async ({ detail: { type, data }}) => {\r\n\t\t\tif(type !== undefined) console.log(type, data);\r\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\r\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\r\n\t\t\t\tschemeAttribute.value = false ? data.scheme ? data.scheme : 'bright_light' : 'bright_light';\r\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\r\n\t\t\t\tthis.setState({ scheme: schemeAttribute.value });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet user = await bridge.sendPromise('VKWebAppGetUserInfo');\r\n\t\tthis.setState({ photo: user.photo_max_orig, name: user.first_name + ' ' + user.last_name });\r\n\r\n\t\tthis.initializeTimer();\r\n\r\n\t\tawait bridge.send('VKWebAppInit');\r\n\t}\r\n\r\n\tgo(panel) {\r\n\t\tthis.setState({activePanel: panel});\r\n\t}\r\n\r\n\tsleep(ms) {\r\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\r\n\t}\r\n\r\n\tinitializeTimer() {\r\n\t\tlet imgs = [cookieIcon];\r\n\t\tsetInterval(()=>{\r\n\t\t\ttry{\r\n\t\t\t\tlet shape_container = document.createElement('div');\r\n\t\t\t\tshape_container.className = 'bg_shape_container';\r\n\t\t\t\tlet shape = document.createElement('img');\r\n\t\t\t\tshape.crossOrigin = 'anonymous';\r\n\t\t\t\tshape.className = 'bg_shape light_outline';\r\n\t\t\t\tshape.src = imgs[this.random(0, imgs.length)];\r\n\t\t\t\tshape.style.left = (this.random(-15, 90)) + 'vw';\r\n\t\t\t\tshape_container.appendChild(shape);\r\n\t\t\t\tdocument.getElementById('bg_shapes').appendChild(shape_container);\r\n\t\t\t\tfor(let i = 0; i < 5; i++){\r\n\t\t\t\t\tshape.style.setProperty('--offset-x-' + i, this.random(-20, 20) +'vw');\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tshape_container.remove();\r\n\t\t\t\t\t}catch (e) {}\r\n\t\t\t\t}, 10000);\r\n\t\t\t}catch (e) {}\r\n\t\t}, 600);\r\n\t}\r\n\r\n\trandom(min, max) {\r\n\t\treturn Math.floor(Math.random() * (max - min) + min);\r\n\t}\r\n\r\n\tviewportToPixels(value) {\r\n\t\tlet parts = value.match(/([0-9\\.]+)(vh|vw)/)\r\n\t\tlet q = Number(parts[1])\r\n\t\tlet side = window[['innerHeight', 'innerWidth'][['vh', 'vw'].indexOf(parts[2])]];\r\n\t\treturn side * (q/100)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<View activePanel={this.state.activePanel} popout={this.state.popout}>\r\n\t\t\t\t<Panel id='main' style={{ zIndex: 1 }}>\r\n\t\t\t\t\t<div className={'animated-background'} style={{ width: '100vw', height: '100vh' }}>\r\n\t\t\t\t\t\t<div id='bg_shapes'/>\r\n\t\t\t\t\t\t<div className='absolute_centered' style={{ transform: 'translate(-50%, -80%)' }}>\r\n\t\t\t\t\t\t\t<div className={'centered_'} style={{ position: 'absolute', top: '10vh', width: '100%', color: 'white' }}><img src={cookieIcon} style={{ marginRight: 8 }} height={32}/> <Title level='1' weight='bold'>Печенька</Title></div>\r\n\t\t\t\t\t\t\t<Lottie style={{pointerEvents: 'none', zIndex: -1, opacity: this.state.showText && .5 }} options={{\r\n\t\t\t\t\t\t\t\tanimationData: animDataCookie,\r\n\t\t\t\t\t\t\t\trendererSettings: {\r\n\t\t\t\t\t\t\t\t\tpreserveAspectRatio: 'xMidYMid slice'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}} width={this.viewportToPixels('70vw')} isStopped={this.state.cookieAnimStarted}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div className='absolute_centered' style={{ backgroundImage: `url(${paper})`, backgroundRepeat: 'repeat', display: !this.state.showText && 'none' }}>\r\n\t\t\t\t\t\t\t\t<Headline weight='bold' style={{ padding: '16px 42px' }}>Очень длинный текст предсказания</Headline>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<Button disabled={!this.state.cookieAnimStarted} size={'xl'} style={{ backgroundColor: 'white', color: 'black' }} onClick={()=>{\r\n\t\t\t\t\t\t\t\tthis.setState({ cookieAnimStarted: false });\r\n\t\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\t\tthis.setState({ cookieAnimStarted: true, showText: true });\r\n\t\t\t\t\t\t\t\t}, 2250)\r\n\t\t\t\t\t\t\t}}>Разломить печеньку</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style={{ position: 'absolute' , bottom: '1vh', width: '100vw', zIndex: 1 }}>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Panel>\r\n\t\t\t</View>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Cookie\\\\src\\\\App.js\";\nimport React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/App.css';\nimport html2canvas from 'html2canvas';\nimport { Panel, Alert, Title, Headline, View, ScreenSpinner, Button, Snackbar, platform, ANDROID } from '@vkontakte/vkui';\nimport Icon16Chevron from './img/chevron_16.png';\nimport Icon28StoryOutline from '@vkontakte/icons/dist/28/story_outline';\nimport cookieIcon from './img/cookie.png';\nimport paper from './img/paper2.jpg';\nimport bg from './img/bg.jpg';\nimport sugar from './img/sugar.png';\nimport e1 from './img/e1.png';\nimport e2 from './img/e2.png';\nimport e3 from './img/e3.png';\nimport e4 from './img/e4.png';\nimport e5 from './img/e5.png';\nimport e6 from './img/e6.png';\nimport e7 from './img/e7.png';\nimport e8 from './img/e8.png';\nimport e9 from './img/e9.png';\nimport e10 from './img/e10.png';\nimport e11 from './img/e11.png';\nimport Lottie from 'react-lottie';\nimport animDataCookie from './animations/cookie.json';\n\nconst random = require('random');\n\nconst os = platform();\nlet app_id = 7554927,\n    group_id = 197570628,\n    need_balance = true;\nlet prefix = '_______';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      popout: null,\n      activePanel: 'main',\n      scheme: 'bright_light',\n      can_generate: true,\n      first_loaded: false,\n      cookieAnimStarted: true,\n      data: {},\n      three: null,\n      phrases: ['В жизни важно лишь одно..\\nА остальное не важно', 'Печенька не может предсказать твою судьбу, сделай ее сам', 'Гони тех кто пёрнул однажды... Кто пёрнул раз. Пёрнет и дважды!', 'Какой бы курицей не была девушка, запомни..\\nГлавное не стать питухом', 'Умные мысли всегда преследуют тебя! Но ты быстрее!', 'Чтобы открыть любую дверь в своей жизни.. нужно запомнить 2 фразы! \"На себя\" и \"от себя\"', 'Безумно можно быть пееервым', 'Ой, ты такой милый и красивый! Улыбнись!', 'Отложи свой телефон на час, посмотри в окно и улыбнись', 'Ты давно не общался с бабушкой или дедушкой, позвони им', 'Слушай свое сердце, пока оно не остановилось', 'Я очень устала, знаешь как сложно придумывать пожелания?', 'Если тебя незаслуженно обидели, вернись и заслужи', 'Неумение врать ещё не повод говорить правду', 'Не каждый может смотреть в завтрашний день, вернее не только лишь все', 'Что ты хочешь услышать? Я Печенька, а не философ.', 'Если жизнь ведет вас по самым сложным тропам - это дорога к удаче.', 'Уделите особое внимание старой дружбе', 'Слушайте каждого. Идеи приходят отовсюду.', 'Ты сногшибаем, как банановая кожура', 'Надо подкачаться, надо-надо подкачаться', 'У тебя скоро день рождения или уже был, или не скоро будет. С праздником', 'Сегодня ты получишь подарок', 'Иди уже в туалет, хватит терпеть', 'Думай о том, о чем не думаю даже те кто думает, что думает', 'Встань и иди туда, где ты нужен', 'Иди погуляй с собакой, не мучай животное', 'Слово не воробей, ничто не воробей кроме воробья', 'Сегодня именно тот день, когда надо подстричься', 'О-оу-и-я-и-ё! БАТАРЕЙКА....', 'Проживи этот день как игру', 'Главное - не забыть главное. А то забудешь главное, а это главное!', 'Не ссы в трусы, все будет Ok', 'Просто будь счастлив, черт побери, ты этого заслуживаешь', 'Не стоит идти против ветра, ведь он наркоман и он дует', 'Не забудь поднять крышку унитаза', 'Не делай поспешных выводов, делай вывошные допсеши', 'Не жди у моря погоды, не оно ее делает', 'Будь как последняя спичка - очень важным', 'Если тебя никто не понимает, возможно ты китаец', 'Не стой там где стоят все, стой там где никто не стоит', 'Я знаю, ты все можешь\\nP.S. Твоя Печенька', 'Ты утопил мою сестру в чае, ублюдок', 'Xiaomi - топ за свои деньги', 'Сегодня ты должен поесть дошика', 'В любой непонятной ситуации ешь дошик', 'Этот день сулит немного интима, иди помойся', 'Твоя сексуальность не знает границ, остановись, умоляю', 'Не стой на светофоре, кто он такой, что бы указывать тебе', 'Не бойся перемен, пусть перемены боятся тебя', 'Не стоит мерить все линейкой, возьми рулетку', 'Не будь п******, выключи свою колонку, когда идёшь по улице', 'Жизнь бьёт тебя каждый раз, когда ты встаёшь? Ползи.', 'Будь Колобком. Катись и радуйся жизни.', 'Не бойся делать ошибки, без них не будет верных решений.', 'Жить — это не значит дышать, это значит действовать. Сделай сегодня то, что давно боялся.', 'Если гора не идёт к Магомеду, то это нормально, ведь она гора.', 'Ты увидишь ответ на свой вопрос на дне 10-й выпитой тобой рюмки водки.', 'Делай что можешь, с тем что имеешь, там где ты есть.', 'Ваш питомец планирует сожрать вас.', 'Не ходите вокруг да около, идите напролом.', 'Если вы не сказали слова, которые стоило бы сказать, у вас слово не воробей.', 'Завтрашним утром поверните налево, как только выйдете из дома.', 'Делай сегодня то, чего не сделал вчера, ведь сделай ты это сегодня, завтра не надо будет делать.', 'Делай это сейчас! Ведь сегодня завтра будет вчера.', 'Если Вы хотите иметь то, что никогда не имели, — начните сегодня делать то, что никогда не делали', 'Ты уникален, так же, как и все остальные.', 'Нет безвыходных ситуаций: даже если вас съели, у вас, по крайней мере, есть два выхода.', 'В ближайшее время ты подкачаешься!\\nОтожмись 5 раз и прочти это еще раз...']\n    };\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.go = this.go.bind(this);\n    this.shareStory = this.shareStory.bind(this);\n  }\n\n  async componentDidMount() {\n    bridge.subscribe(async ({\n      detail: {\n        type,\n        data\n      }\n    }) => {\n      if (type !== undefined) console.log(type, data);\n\n      if (type === 'VKWebAppUpdateConfig') {\n        const schemeAttribute = document.createAttribute('scheme');\n        schemeAttribute.value = false ? data.scheme ? data.scheme : 'bright_light' : 'bright_light';\n        document.body.attributes.setNamedItem(schemeAttribute);\n        this.setState({\n          scheme: schemeAttribute.value\n        });\n\n        if (bridge.supports('VKWebAppSetViewSettings')) {\n          bridge.send('VKWebAppSetViewSettings', {\n            status_bar_style: 'light',\n            action_bar_color: 'none'\n          });\n        }\n      } else if (type === 'VKWebAppViewRestore') {\n        this.setState({\n          popout: null,\n          screen: false\n        });\n        let shapes = document.getElementsByClassName('bg_shape_container');\n\n        for (let element of shapes) {\n          try {\n            console.log('delete', element);\n            element.remove();\n          } catch (e) {\n            console.error(e);\n          }\n        }\n      }\n    });\n    let user = await bridge.sendPromise('VKWebAppGetUserInfo');\n    this.setState({\n      photo: user.photo_max_orig,\n      name: user.first_name + ' ' + user.last_name\n    });\n    this.initializeTimer();\n    await this.updateStorage();\n    await bridge.send('VKWebAppInit');\n  }\n\n  async updateStorage() {\n    let keys1 = ['used1', 'used2', 'used3'],\n        keys2 = ['balance', 'share_story', 'allow_msg', 'share_wall', 'sub_group', 'allow_noty', 'got_free'];\n    let sValues = await bridge.sendPromise('VKWebAppStorageGet', {\n      keys: need_balance ? (keys2.join(prefix + ',') + prefix).split(',') : (keys1.join(prefix + ',') + prefix).split(',')\n    });\n    sValues = sValues.keys;\n    let data = {};\n\n    try {\n      for (let value of sValues) {\n        let nmbr = Number(value.value);\n        data[value.key] = value.value == 'true' || value.value == 'false' ? value.value == 'true' : nmbr > 0 ? nmbr : value.value;\n      }\n    } catch (e) {\n      console.error('e3', e);\n    }\n\n    this.setState({\n      data,\n      sValues\n    });\n    console.log(data);\n\n    if (data['got_free' + prefix] === false || Date.now() - data['got_free' + prefix] >= 2 * 60 * 60 * 1000) {\n      await bridge.sendPromise('VKWebAppStorageSet', {\n        key: 'got_free' + prefix,\n        value: Date.now().toString()\n      });\n      await bridge.sendPromise('VKWebAppStorageSet', {\n        key: 'balance' + prefix,\n        value: data['got_free' + prefix] === false ? '1' : (data['balance' + prefix] + 1).toString()\n      });\n      await this.updateStorage();\n    }\n\n    return;\n  }\n\n  go(panel) {\n    this.setState({\n      activePanel: panel\n    });\n  }\n\n  sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  initializeTimer() {\n    let imgs = [e1, e2, e3, e4, e5, e6, e7, e8, e9, e10, e11];\n    setInterval(() => {\n      try {\n        if (this.state.screen) return;\n        let shape_container = document.createElement('div');\n        shape_container.className = 'bg_shape_container';\n        let shape = document.createElement('img');\n        shape.crossOrigin = 'anonymous';\n        shape.className = 'bg_shape light_outline';\n        shape.src = imgs[this.random(0, imgs.length)];\n        shape.style.left = this.random(-15, 90) + 'vw';\n        shape.style.height = '10vh';\n        shape.style.width = '10vh';\n        shape_container.appendChild(shape);\n        document.getElementById('bg_shapes').appendChild(shape_container);\n\n        for (let i = 0; i < 5; i++) {\n          shape.style.setProperty('--offset-x-' + i, this.random(-20, 20) + 'vw');\n        }\n\n        setTimeout(() => {\n          try {\n            shape_container.remove();\n          } catch (e) {}\n        }, 10000);\n      } catch (e) {}\n    }, 600);\n  }\n\n  random(min, max) {\n    return Math.floor(Math.random() * (max - min) + min);\n  }\n\n  viewportToPixels(value) {\n    let parts = value.match(/([0-9\\.]+)(vh|vw)/);\n    let q = Number(parts[1]);\n    let side = window[['innerHeight', 'innerWidth'][['vh', 'vw'].indexOf(parts[2])]];\n    return side * (q / 100);\n  }\n\n  convertMiliseconds(miliseconds) {\n    let days, hours, minutes, seconds, total_hours, total_minutes, total_seconds;\n    total_seconds = parseInt(Math.floor(miliseconds / 1000));\n    total_minutes = parseInt(Math.floor(total_seconds / 60));\n    total_hours = parseInt(Math.floor(total_minutes / 60));\n    days = parseInt(Math.floor(total_hours / 24));\n    seconds = parseInt(total_seconds % 60);\n    minutes = parseInt(total_minutes % 60);\n    hours = parseInt(total_hours % 24);\n    return hours + 'ч. ' + minutes + 'мин.';\n  }\n\n  async shareStory(add) {\n    try {\n      this.setState({\n        popout: React.createElement(ScreenSpinner, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 276\n          },\n          __self: this\n        }),\n        screen: true\n      });\n      await this.sleep(750);\n      let element = document.getElementById('main');\n      html2canvas(element, {\n        allowTaint: true\n      }).then(async canvas => {\n        this.setState({\n          screen: false\n        });\n        await this.sleep(250);\n        let blob = canvas.toDataURL('image/png');\n\n        try {\n          await bridge.send('VKWebAppShowStoryBox', {\n            background_type: 'image',\n            blob,\n            attachment: {\n              url: 'https://vk.com/app' + app_id,\n              text: 'open',\n              type: 'url'\n            }\n          });\n          this.setState({\n            shared: true\n          });\n\n          if (add) {\n            await bridge.sendPromise('VKWebAppStorageSet', {\n              key: 'balance' + prefix,\n              value: (this.state.data['balance' + prefix] + 1).toString()\n            });\n            await bridge.sendPromise('VKWebAppStorageSet', {\n              key: 'share_story' + prefix,\n              value: Date.now().toString()\n            });\n            await this.updateStorage();\n          }\n        } catch (e) {}\n\n        this.setState({\n          popout: null\n        });\n      });\n    } catch (e) {\n      console.error(e);\n      this.setState({\n        snackbar: React.createElement(Snackbar, {\n          layout: \"vertical\",\n          onClose: () => this.setState({\n            snackbar: null\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 300\n          },\n          __self: this\n        }, \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\")\n      });\n      this.setState({\n        popout: null,\n        screen: false\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(View, {\n      activePanel: this.state.activePanel,\n      popout: this.state.popout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, React.createElement(Panel, {\n      id: \"main\",\n      style: {\n        zIndex: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'animated-background',\n      style: {\n        width: '100vw',\n        height: '100vh',\n        background: this.state.screen && \"url(\".concat(bg, \")\")\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"bg_shapes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }), !this.state.screen && need_balance && React.createElement(\"div\", {\n      style: {\n        position: 'absolute',\n        top: os === ANDROID ? '6vh' : '3vh',\n        left: '6vw'\n      },\n      className: \"centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, React.createElement(Headline, {\n      weight: \"bold\",\n      style: {\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, \"\\u0411\\u0430\\u043B\\u0430\\u043D\\u0441: \", this.state.data['balance' + prefix] > 0 ? this.state.data['balance' + prefix] : 0), React.createElement(\"img\", {\n      style: {\n        marginLeft: 8\n      },\n      src: sugar,\n      height: 32,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"absolute_centered\",\n      style: {\n        transform: 'translate(-50%, -70%)'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'centered_',\n      style: {\n        position: 'absolute',\n        top: '10vh',\n        width: '100%',\n        color: 'white',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: cookieIcon,\n      style: {\n        marginRight: 8,\n        display: this.state.screen || need_balance && 'none'\n      },\n      height: 32,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }), React.createElement(Title, {\n      level: \"1\",\n      style: {\n        fontFamily: 'Font',\n        fontWeight: '400',\n        letterSpacing: '2px',\n        fontSize: '28px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, !this.state.screen ? need_balance ? '' : 'Печенька' : 'Моё предсказание из печеньки на сегодня'.toUpperCase())), React.createElement(Lottie, {\n      style: {\n        pointerEvents: 'none',\n        zIndex: -1,\n        opacity: this.state.showText && .5\n      },\n      options: {\n        animationData: animDataCookie,\n        rendererSettings: {\n          preserveAspectRatio: 'xMidYMid slice'\n        }\n      },\n      width: this.viewportToPixels('90vw'),\n      isStopped: this.state.cookieAnimStarted,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: 'В ближайшее время ты подкачаешься!\\n' + 'Отожмись 5 раз и прочти это еще раз...'.replace('\\n', '<br/>')\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"absolute_centered\",\n      style: {\n        backgroundImage: \"url(\".concat(paper, \")\"),\n        backgroundRepeat: 'repeat',\n        display: !this.state.showText && 'none',\n        borderRadius: this.viewportToPixels('1vh')\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }, React.createElement(Headline, {\n      weight: \"bold\",\n      style: {\n        padding: '16px',\n        width: '70vw',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: this.state.phrases[random.int(0, this.state.phrases.length - 1)].replace('\\n', '<br/>')\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }))), !this.state.screen && React.createElement(Button, {\n      disabled: !this.state.cookieAnimStarted,\n      size: 'xl',\n      style: {\n        backgroundColor: 'white',\n        color: 'black'\n      },\n      onClick: async () => {\n        if (need_balance) {\n          if (this.state.data['balance' + prefix] > 0) {\n            await bridge.sendPromise('VKWebAppStorageSet', {\n              key: 'balance' + prefix,\n              value: (this.state.data['balance' + prefix] - 1).toString()\n            });\n            await this.updateStorage();\n          } else {\n            this.setState({\n              popout: React.createElement(Alert, {\n                actions: [{\n                  title: 'Получить сахар',\n                  autoclose: true,\n                  action: async () => {\n                    this.setState({\n                      snackbar: null\n                    });\n\n                    if ((!this.state.data['share_story' + prefix] || this.state.data['share_story' + prefix] > 0 && Date.now() - this.state.data['share_story' + prefix] >= 24 * 60 * 60 * 1000) && this.state.showText) {\n                      console.log('share_story');\n                      await this.shareStory(true);\n                    } else if (!this.state.data['allow_msg' + prefix]) {\n                      console.log('allow_msg');\n\n                      try {\n                        await bridge.sendPromise('VKWebAppAllowMessagesFromGroup', {\n                          group_id,\n                          key: 'dBuBKe1kFcdemzB'\n                        });\n                        await bridge.sendPromise('VKWebAppStorageSet', {\n                          key: 'balance' + prefix,\n                          value: (this.state.data['balance' + prefix] + 1).toString()\n                        });\n                        await bridge.sendPromise('VKWebAppStorageSet', {\n                          key: 'allow_msg' + prefix,\n                          value: 'true'\n                        });\n                        await this.updateStorage();\n                        this.setState({\n                          snackbar: React.createElement(Snackbar, {\n                            layout: \"vertical\",\n                            onClose: () => this.setState({\n                              snackbar: null\n                            }),\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 377\n                            },\n                            __self: this\n                          }, \"\\u0412\\u044B \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u043B\\u0438 1 \\u0441\\u0430\\u0445\\u0430\\u0440\")\n                        });\n                      } catch (e) {}\n                    } else if (!this.state.data['share_wall' + prefix]) {\n                      console.log('share_wall');\n\n                      try {\n                        await bridge.sendPromise('VKWebAppShowWallPostBox', {\n                          message: 'Открой свою печеньку 👉 vk.com/app' + app_id,\n                          attachments: 'photo-197650774_457239017'\n                        });\n                        await bridge.sendPromise('VKWebAppStorageSet', {\n                          key: 'balance' + prefix,\n                          value: (this.state.data['balance' + prefix] + 1).toString()\n                        });\n                        await bridge.sendPromise('VKWebAppStorageSet', {\n                          key: 'share_wall' + prefix,\n                          value: 'true'\n                        });\n                        await this.updateStorage();\n                        this.setState({\n                          snackbar: React.createElement(Snackbar, {\n                            layout: \"vertical\",\n                            onClose: () => this.setState({\n                              snackbar: null\n                            }),\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 393\n                            },\n                            __self: this\n                          }, \"\\u0412\\u044B \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u043B\\u0438 1 \\u0441\\u0430\\u0445\\u0430\\u0440\")\n                        });\n                      } catch (e) {}\n                    } else if (!this.state.data['sub_group' + prefix]) {\n                      console.log('sub_group');\n\n                      try {\n                        await bridge.sendPromise('VKWebAppJoinGroup', {\n                          group_id\n                        });\n                        await bridge.sendPromise('VKWebAppStorageSet', {\n                          key: 'balance' + prefix,\n                          value: (this.state.data['balance' + prefix] + 1).toString()\n                        });\n                        await bridge.sendPromise('VKWebAppStorageSet', {\n                          key: 'sub_group' + prefix,\n                          value: 'true'\n                        });\n                        await this.updateStorage();\n                        this.setState({\n                          snackbar: React.createElement(Snackbar, {\n                            layout: \"vertical\",\n                            onClose: () => this.setState({\n                              snackbar: null\n                            }),\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 409\n                            },\n                            __self: this\n                          }, \"\\u0412\\u044B \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u043B\\u0438 1 \\u0441\\u0430\\u0445\\u0430\\u0440\")\n                        });\n                      } catch (e) {}\n                    } else if (!this.state.data['allow_noty' + prefix]) {\n                      console.log('allow_noty');\n\n                      try {\n                        await bridge.sendPromise('VKWebAppAllowNotifications', {});\n                        await bridge.sendPromise('VKWebAppStorageSet', {\n                          key: 'balance' + prefix,\n                          value: (this.state.data['balance' + prefix] + 1).toString()\n                        });\n                        await bridge.sendPromise('VKWebAppStorageSet', {\n                          key: 'allow_noty' + prefix,\n                          value: 'true'\n                        });\n                        await this.updateStorage();\n                        this.setState({\n                          snackbar: React.createElement(Snackbar, {\n                            layout: \"vertical\",\n                            onClose: () => this.setState({\n                              snackbar: null\n                            }),\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 425\n                            },\n                            __self: this\n                          }, \"\\u0412\\u044B \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u043B\\u0438 1 \\u0441\\u0430\\u0445\\u0430\\u0440\")\n                        });\n                      } catch (e) {}\n                    } else {\n                      await this.sleep(100);\n                      this.setState({\n                        snackbar: React.createElement(Snackbar, {\n                          layout: \"vertical\",\n                          onClose: () => this.setState({\n                            snackbar: null\n                          }),\n                          __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 436\n                          },\n                          __self: this\n                        }, \"\\u0411\\u0435\\u0441\\u043F\\u043B\\u0430\\u0442\\u043D\\u044B\\u0439 \\u0441\\u0430\\u0445\\u0430\\u0440 \\u0437\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u043B\\u0441\\u044F. \\u0412\\u043E\\u0437\\u0432\\u0440\\u0430\\u0449\\u0430\\u0439\\u0442\\u0435\\u0441\\u044C \\u0447\\u0435\\u0440\\u0435\\u0437 2 \\u0447\\u0430\\u0441\\u0430.\")\n                      });\n                    }\n                  }\n                }],\n                onClose: () => this.setState({\n                  popout: null\n                }),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 360\n                },\n                __self: this\n              }, React.createElement(\"span\", {\n                className: 'centered',\n                style: {\n                  textAlign: 'center'\n                },\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 448\n                },\n                __self: this\n              }, React.createElement(Title, {\n                level: 2,\n                weight: \"bold\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 448\n                },\n                __self: this\n              }, \"\\u0423\\u043F\\u0441\"), React.createElement(\"img\", {\n                src: e2,\n                style: {\n                  marginLeft: 8\n                },\n                height: 24,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 448\n                },\n                __self: this\n              })), React.createElement(\"span\", {\n                className: 'centered',\n                style: {\n                  textAlign: 'center'\n                },\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 449\n                },\n                __self: this\n              }, React.createElement(\"p\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 449\n                },\n                __self: this\n              }, \"\\u0423 \\u0412\\u0430\\u0441 \\u043D\\u0435\\u0434\\u043E\\u0441\\u0442\\u0430\\u0442\\u043E\\u0447\\u043D\\u043E\"), React.createElement(\"img\", {\n                src: sugar,\n                height: 32,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 449\n                },\n                __self: this\n              })))\n            });\n            return;\n          }\n        } else {\n          if (this.state.data['used3' + prefix] === false) {\n            if (!this.state.data['used1' + prefix]) {\n              console.log('first open');\n\n              try {\n                await bridge.sendPromise('VKWebAppAllowMessagesFromGroup', {\n                  group_id,\n                  key: 'dBuBKe1kFcdemzB'\n                });\n              } catch (e) {\n                this.setState({\n                  snackbar: React.createElement(Snackbar, {\n                    layout: \"vertical\",\n                    onClose: () => this.setState({\n                      snackbar: null\n                    }),\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 462\n                    },\n                    __self: this\n                  }, \"\\u041D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0441\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u0440\\u0430\\u0437\\u0440\\u0435\\u0448\\u0438\\u0442\\u044C \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u044F\")\n                });\n                return;\n              }\n            }\n\n            if (this.state.used) {\n              console.log('two open');\n\n              if (!this.state.shared) {\n                this.setState({\n                  snackbar: React.createElement(Snackbar, {\n                    layout: \"vertical\",\n                    onClose: () => this.setState({\n                      snackbar: null\n                    }),\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 477\n                    },\n                    __self: this\n                  }, \"\\u041D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0441\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u043F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F \\u0432 \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0438\")\n                });\n                return;\n              }\n            }\n\n            if (this.state.three) {\n              console.log('three open');\n\n              try {\n                await bridge.sendPromise('VKWebAppShowWallPostBox', {\n                  message: 'Открой свою печеньку 👉 vk.com/app' + app_id,\n                  attachments: 'photo-197650774_457239017'\n                });\n                this.setState({\n                  three: false\n                });\n              } catch (e) {\n                this.setState({\n                  snackbar: React.createElement(Snackbar, {\n                    layout: \"vertical\",\n                    onClose: () => this.setState({\n                      snackbar: null\n                    }),\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 495\n                    },\n                    __self: this\n                  }, \"\\u041D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0441\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u043F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\\u044E\")\n                });\n                return;\n              }\n            }\n          } else {\n            console.log('four open');\n            let last = Date.now() - this.state.data['used3' + prefix];\n\n            if (last < 2 * 60 * 60 * 1000) {\n              console.log('need wait 2h');\n              this.setState({\n                snackbar: React.createElement(Snackbar, {\n                  layout: \"vertical\",\n                  onClose: () => this.setState({\n                    snackbar: null\n                  }),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 511\n                  },\n                  __self: this\n                }, \"\\u0414\\u043B\\u044F \\u043F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0430 \\u043F\\u043E\\u0434\\u043E\\u0436\\u0434\\u0438\\u0442\\u0435 \", this.convertMiliseconds(2 * 60 * 60 * 1000 - last))\n              });\n              return;\n            }\n          }\n\n          if (!this.state.data['used1' + prefix]) {\n            await bridge.sendPromise('VKWebAppStorageSet', {\n              key: 'used1' + prefix,\n              value: Date.now().toString()\n            });\n          } else if (!this.state.data['used2' + prefix]) {\n            if (this.state.three === null) this.setState({\n              three: true\n            });\n            await bridge.sendPromise('VKWebAppStorageSet', {\n              key: 'used2' + prefix,\n              value: Date.now().toString()\n            });\n          } else {\n            await bridge.sendPromise('VKWebAppStorageSet', {\n              key: 'used3' + prefix,\n              value: Date.now().toString()\n            });\n          }\n\n          await this.updateStorage();\n        }\n\n        this.setState({\n          cookieAnimStarted: false,\n          showText: false\n        });\n        setTimeout(() => {\n          this.setState({\n            cookieAnimStarted: true,\n            showText: true,\n            used: true\n          });\n        }, 2250);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, need_balance ? 'Разломить за 1 ' : this.state.showText ? 'Попробовать снова' : 'Разломить печеньку', \" \", need_balance && React.createElement(\"img\", {\n      style: {\n        marginLeft: 8\n      },\n      src: sugar,\n      height: 32,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 538\n      },\n      __self: this\n    }))), this.state.screen && React.createElement(\"div\", {\n      style: {\n        position: 'absolute',\n        bottom: '18vh',\n        width: '100vw'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543\n      },\n      __self: this\n    }, React.createElement(Title, {\n      level: 2,\n      weight: \"semibold\",\n      style: {\n        color: 'white',\n        width: '100vw',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 544\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        width: '80vw'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 545\n      },\n      __self: this\n    }, \"\\u041F\\u0435\\u0440\\u0435\\u0445\\u043E\\u0434\\u0438 \\u0432 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C \\u043F\\u0440\\u0435\\u0434\\u0441\\u043A\\u0430\\u0437\\u0430\\u043D\\u0438\\u0435\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 547\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 547\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: 'centered',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 548\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      crossOrigin: 'anonymous',\n      style: {\n        transform: 'rotate(90deg)'\n      },\n      height: \"26px\",\n      src: Icon16Chevron,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 549\n      },\n      __self: this\n    }))), this.state.showText && !this.state.screen && React.createElement(\"div\", {\n      style: {\n        position: 'absolute',\n        bottom: os === ANDROID ? '8vh' : '3vh',\n        width: '100vw',\n        zIndex: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 555\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: async () => {\n        await this.shareStory();\n      },\n      style: {\n        background: '#ffffff00',\n        color: 'white',\n        fontSize: '20px',\n        letterSpacing: '1px'\n      },\n      before: React.createElement(Icon28StoryOutline, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 558\n        },\n        __self: this\n      }),\n      size: \"xl\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F \\u0432 \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0438\")), this.state.snackbar)));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/Cookie/src/App.js"],"names":["React","bridge","html2canvas","Panel","Alert","Title","Headline","View","ScreenSpinner","Button","Snackbar","platform","ANDROID","Icon16Chevron","Icon28StoryOutline","cookieIcon","paper","bg","sugar","e1","e2","e3","e4","e5","e6","e7","e8","e9","e10","e11","Lottie","animDataCookie","random","require","os","app_id","group_id","need_balance","prefix","App","Component","constructor","props","state","popout","activePanel","scheme","can_generate","first_loaded","cookieAnimStarted","data","three","phrases","componentDidMount","bind","go","shareStory","subscribe","detail","type","undefined","console","log","schemeAttribute","document","createAttribute","value","body","attributes","setNamedItem","setState","supports","send","status_bar_style","action_bar_color","screen","shapes","getElementsByClassName","element","remove","e","error","user","sendPromise","photo","photo_max_orig","name","first_name","last_name","initializeTimer","updateStorage","keys1","keys2","sValues","keys","join","split","nmbr","Number","key","Date","now","toString","panel","sleep","ms","Promise","resolve","setTimeout","imgs","setInterval","shape_container","createElement","className","shape","crossOrigin","src","length","style","left","height","width","appendChild","getElementById","i","setProperty","min","max","Math","floor","viewportToPixels","parts","match","q","side","window","indexOf","convertMiliseconds","miliseconds","days","hours","minutes","seconds","total_hours","total_minutes","total_seconds","parseInt","add","allowTaint","then","canvas","blob","toDataURL","background_type","attachment","url","text","shared","snackbar","render","zIndex","background","position","top","color","marginLeft","transform","textAlign","marginRight","display","fontFamily","fontWeight","letterSpacing","fontSize","toUpperCase","pointerEvents","opacity","showText","animationData","rendererSettings","preserveAspectRatio","__html","replace","backgroundImage","backgroundRepeat","borderRadius","padding","int","backgroundColor","title","autoclose","action","message","attachments","used","last","bottom"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './css/App.css'\r\nimport html2canvas from 'html2canvas';\r\n\r\nimport { Panel, Alert, Title, Headline, View, ScreenSpinner, Button, Snackbar, platform, ANDROID  } from '@vkontakte/vkui';\r\n\r\nimport Icon16Chevron from './img/chevron_16.png';\r\nimport Icon28StoryOutline from '@vkontakte/icons/dist/28/story_outline';\r\n\r\nimport cookieIcon from './img/cookie.png';\r\nimport paper from './img/paper2.jpg';\r\nimport bg from './img/bg.jpg';\r\nimport sugar from './img/sugar.png';\r\n\r\nimport e1 from './img/e1.png';\r\nimport e2 from './img/e2.png';\r\nimport e3 from './img/e3.png';\r\nimport e4 from './img/e4.png';\r\nimport e5 from './img/e5.png';\r\nimport e6 from './img/e6.png';\r\nimport e7 from './img/e7.png';\r\nimport e8 from './img/e8.png';\r\nimport e9 from './img/e9.png';\r\nimport e10 from './img/e10.png';\r\nimport e11 from './img/e11.png';\r\n\r\nimport Lottie from 'react-lottie'\r\nimport animDataCookie from './animations/cookie.json'\r\n\r\nconst random = require('random');\r\n\r\nconst os = platform();\r\n\r\nlet app_id = 7554927,\r\n\tgroup_id = 197570628,\r\n\tneed_balance = true;\r\n\r\nlet prefix = '_______';\r\n\r\nclass App extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tpopout: null,\r\n\t\t\tactivePanel: 'main',\r\n\t\t\tscheme: 'bright_light',\r\n\r\n\t\t\tcan_generate: true,\r\n\t\t\tfirst_loaded: false,\r\n\t\t\tcookieAnimStarted: true,\r\n\r\n\t\t\tdata: {},\r\n\r\n\t\t\tthree: null,\r\n\r\n\t\t\tphrases: [\r\n\t\t\t\t'В жизни важно лишь одно..\\nА остальное не важно',\r\n\t\t\t\t'Печенька не может предсказать твою судьбу, сделай ее сам',\r\n\t\t\t\t'Гони тех кто пёрнул однажды... Кто пёрнул раз. Пёрнет и дважды!',\r\n\t\t\t\t'Какой бы курицей не была девушка, запомни..\\nГлавное не стать питухом',\r\n\t\t\t\t'Умные мысли всегда преследуют тебя! Но ты быстрее!',\r\n\t\t\t\t'Чтобы открыть любую дверь в своей жизни.. нужно запомнить 2 фразы! \"На себя\" и \"от себя\"',\r\n\t\t\t\t'Безумно можно быть пееервым',\r\n\t\t\t\t'Ой, ты такой милый и красивый! Улыбнись!',\r\n\t\t\t\t'Отложи свой телефон на час, посмотри в окно и улыбнись',\r\n\t\t\t\t'Ты давно не общался с бабушкой или дедушкой, позвони им',\r\n\t\t\t\t'Слушай свое сердце, пока оно не остановилось',\r\n\t\t\t\t'Я очень устала, знаешь как сложно придумывать пожелания?',\r\n\t\t\t\t'Если тебя незаслуженно обидели, вернись и заслужи',\r\n\t\t\t\t'Неумение врать ещё не повод говорить правду',\r\n\t\t\t\t'Не каждый может смотреть в завтрашний день, вернее не только лишь все',\r\n\t\t\t\t'Что ты хочешь услышать? Я Печенька, а не философ.',\r\n\t\t\t\t'Если жизнь ведет вас по самым сложным тропам - это дорога к удаче.',\r\n\t\t\t\t'Уделите особое внимание старой дружбе',\r\n\t\t\t\t'Слушайте каждого. Идеи приходят отовсюду.',\r\n\t\t\t\t'Ты сногшибаем, как банановая кожура',\r\n\t\t\t\t'Надо подкачаться, надо-надо подкачаться',\r\n\t\t\t\t'У тебя скоро день рождения или уже был, или не скоро будет. С праздником',\r\n\t\t\t\t'Сегодня ты получишь подарок',\r\n\t\t\t\t'Иди уже в туалет, хватит терпеть',\r\n\t\t\t\t'Думай о том, о чем не думаю даже те кто думает, что думает',\r\n\t\t\t\t'Встань и иди туда, где ты нужен',\r\n\t\t\t\t'Иди погуляй с собакой, не мучай животное',\r\n\t\t\t\t'Слово не воробей, ничто не воробей кроме воробья',\r\n\t\t\t\t'Сегодня именно тот день, когда надо подстричься',\r\n\t\t\t\t'О-оу-и-я-и-ё! БАТАРЕЙКА....',\r\n\t\t\t\t'Проживи этот день как игру',\r\n\t\t\t\t'Главное - не забыть главное. А то забудешь главное, а это главное!',\r\n\t\t\t\t'Не ссы в трусы, все будет Ok',\r\n\t\t\t\t'Просто будь счастлив, черт побери, ты этого заслуживаешь',\r\n\t\t\t\t'Не стоит идти против ветра, ведь он наркоман и он дует',\r\n\t\t\t\t'Не забудь поднять крышку унитаза',\r\n\t\t\t\t'Не делай поспешных выводов, делай вывошные допсеши',\r\n\t\t\t\t'Не жди у моря погоды, не оно ее делает',\r\n\t\t\t\t'Будь как последняя спичка - очень важным',\r\n\t\t\t\t'Если тебя никто не понимает, возможно ты китаец',\r\n\t\t\t\t'Не стой там где стоят все, стой там где никто не стоит',\r\n\t\t\t\t'Я знаю, ты все можешь\\nP.S. Твоя Печенька',\r\n\t\t\t\t'Ты утопил мою сестру в чае, ублюдок',\r\n\t\t\t\t'Xiaomi - топ за свои деньги',\r\n\t\t\t\t'Сегодня ты должен поесть дошика',\r\n\t\t\t\t'В любой непонятной ситуации ешь дошик',\r\n\t\t\t\t'Этот день сулит немного интима, иди помойся',\r\n\t\t\t\t'Твоя сексуальность не знает границ, остановись, умоляю',\r\n\t\t\t\t'Не стой на светофоре, кто он такой, что бы указывать тебе',\r\n\t\t\t\t'Не бойся перемен, пусть перемены боятся тебя',\r\n\t\t\t\t'Не стоит мерить все линейкой, возьми рулетку',\r\n\t\t\t\t'Не будь п******, выключи свою колонку, когда идёшь по улице',\r\n\t\t\t\t'Жизнь бьёт тебя каждый раз, когда ты встаёшь? Ползи.',\r\n\t\t\t\t'Будь Колобком. Катись и радуйся жизни.',\r\n\t\t\t\t'Не бойся делать ошибки, без них не будет верных решений.',\r\n\t\t\t\t'Жить — это не значит дышать, это значит действовать. Сделай сегодня то, что давно боялся.',\r\n\t\t\t\t'Если гора не идёт к Магомеду, то это нормально, ведь она гора.',\r\n\t\t\t\t'Ты увидишь ответ на свой вопрос на дне 10-й выпитой тобой рюмки водки.',\r\n\t\t\t\t'Делай что можешь, с тем что имеешь, там где ты есть.',\r\n\t\t\t\t'Ваш питомец планирует сожрать вас.',\r\n\t\t\t\t'Не ходите вокруг да около, идите напролом.',\r\n\t\t\t\t'Если вы не сказали слова, которые стоило бы сказать, у вас слово не воробей.',\r\n\t\t\t\t'Завтрашним утром поверните налево, как только выйдете из дома.',\r\n\t\t\t\t'Делай сегодня то, чего не сделал вчера, ведь сделай ты это сегодня, завтра не надо будет делать.',\r\n\t\t\t\t'Делай это сейчас! Ведь сегодня завтра будет вчера.',\r\n\t\t\t\t'Если Вы хотите иметь то, что никогда не имели, — начните сегодня делать то, что никогда не делали',\r\n\t\t\t\t'Ты уникален, так же, как и все остальные.',\r\n\t\t\t\t'Нет безвыходных ситуаций: даже если вас съели, у вас, по крайней мере, есть два выхода.',\r\n\t\t\t\t'В ближайшее время ты подкачаешься!\\nОтожмись 5 раз и прочти это еще раз...'\r\n\t\t\t]\r\n\t\t};\r\n\r\n\t\tthis.componentDidMount = this.componentDidMount.bind(this);\r\n\t\tthis.go = this.go.bind(this);\r\n\t\tthis.shareStory = this.shareStory.bind(this);\r\n\t}\r\n\r\n\tasync componentDidMount () {\r\n\t\tbridge.subscribe(async ({ detail: { type, data }}) => {\r\n\t\t\tif(type !== undefined) console.log(type, data);\r\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\r\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\r\n\t\t\t\tschemeAttribute.value = false ? data.scheme ? data.scheme : 'bright_light' : 'bright_light';\r\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\r\n\t\t\t\tthis.setState({ scheme: schemeAttribute.value });\r\n\t\t\t\tif(bridge.supports('VKWebAppSetViewSettings')){\r\n\t\t\t\t\tbridge.send('VKWebAppSetViewSettings', {status_bar_style: 'light', action_bar_color: 'none'});\r\n\t\t\t\t}\r\n\t\t\t}else if (type === 'VKWebAppViewRestore') {\r\n\t\t\t\tthis.setState({ popout: null, screen: false });\r\n\t\t\t\tlet shapes = document.getElementsByClassName('bg_shape_container');\r\n\t\t\t\tfor(let element of shapes){\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tconsole.log('delete', element);\r\n\t\t\t\t\t\telement.remove();\r\n\t\t\t\t\t}catch (e) {\r\n\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet user = await bridge.sendPromise('VKWebAppGetUserInfo');\r\n\t\tthis.setState({ photo: user.photo_max_orig, name: user.first_name + ' ' + user.last_name });\r\n\r\n\t\tthis.initializeTimer();\r\n\r\n\t\tawait this.updateStorage();\r\n\r\n\t\tawait bridge.send('VKWebAppInit');\r\n\t}\r\n\r\n\tasync updateStorage () {\r\n\t\tlet keys1 = [ 'used1', 'used2', 'used3' ],\r\n\t\t\tkeys2 = [ 'balance', 'share_story', 'allow_msg', 'share_wall', 'sub_group', 'allow_noty', 'got_free' ];\r\n\t\tlet sValues = await bridge.sendPromise('VKWebAppStorageGet', { keys: need_balance ? (keys2.join(prefix+',') + prefix).split(',') : (keys1.join(prefix+',') + prefix).split(',') });\r\n\t\tsValues = sValues.keys;\r\n\t\tlet data = {};\r\n\t\ttry{\r\n\t\t\tfor(let value of sValues){\r\n\t\t\t\tlet nmbr = Number(value.value);\r\n\t\t\t\tdata[value.key] = (value.value == 'true' || value.value == 'false') ? value.value == 'true' : nmbr > 0 ? nmbr : value.value;\r\n\t\t\t}\r\n\t\t}catch (e) {\r\n\t\t\tconsole.error('e3', e)\r\n\t\t}\r\n\t\tthis.setState({ data, sValues });\r\n\r\n\t\tconsole.log(data);\r\n\r\n\t\tif(data['got_free' + prefix] === false || Date.now() - data['got_free' + prefix] >= 2 * 60 * 60 * 1000 ){\r\n\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'got_free' + prefix, value: Date.now().toString()});\r\n\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'balance' + prefix, value: data['got_free' + prefix] === false ? '1' : (data['balance' + prefix] + 1).toString()});\r\n\t\t\tawait this.updateStorage();\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tgo(panel) {\r\n\t\tthis.setState({activePanel: panel});\r\n\t}\r\n\r\n\tsleep(ms) {\r\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\r\n\t}\r\n\r\n\tinitializeTimer() {\r\n\t\tlet imgs = [\r\n\t\t\te1,\r\n\t\t\te2,\r\n\t\t\te3,\r\n\t\t\te4,\r\n\t\t\te5,\r\n\t\t\te6,\r\n\t\t\te7,\r\n\t\t\te8,\r\n\t\t\te9,\r\n\t\t\te10,\r\n\t\t\te11\r\n\t\t];\r\n\t\tsetInterval(()=>{\r\n\t\t\ttry{\r\n\t\t\t\tif(this.state.screen) return;\r\n\t\t\t\tlet shape_container = document.createElement('div');\r\n\t\t\t\tshape_container.className = 'bg_shape_container';\r\n\t\t\t\tlet shape = document.createElement('img');\r\n\t\t\t\tshape.crossOrigin = 'anonymous';\r\n\t\t\t\tshape.className = 'bg_shape light_outline';\r\n\t\t\t\tshape.src = imgs[this.random(0, imgs.length)];\r\n\t\t\t\tshape.style.left = (this.random(-15, 90)) + 'vw';\r\n\t\t\t\tshape.style.height = '10vh';\r\n\t\t\t\tshape.style.width = '10vh';\r\n\t\t\t\tshape_container.appendChild(shape);\r\n\t\t\t\tdocument.getElementById('bg_shapes').appendChild(shape_container);\r\n\t\t\t\tfor(let i = 0; i < 5; i++){\r\n\t\t\t\t\tshape.style.setProperty('--offset-x-' + i, this.random(-20, 20) +'vw');\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tshape_container.remove();\r\n\t\t\t\t\t}catch (e) {}\r\n\t\t\t\t}, 10000);\r\n\t\t\t}catch (e) {}\r\n\t\t}, 600);\r\n\t}\r\n\r\n\trandom(min, max) {\r\n\t\treturn Math.floor(Math.random() * (max - min) + min);\r\n\t}\r\n\r\n\tviewportToPixels(value) {\r\n\t\tlet parts = value.match(/([0-9\\.]+)(vh|vw)/);\r\n\t\tlet q = Number(parts[1])\r\n\t\tlet side = window[['innerHeight', 'innerWidth'][['vh', 'vw'].indexOf(parts[2])]];\r\n\t\treturn side * (q/100)\r\n\t}\r\n\r\n\tconvertMiliseconds(miliseconds) {\r\n\t\tlet days, hours, minutes, seconds, total_hours, total_minutes, total_seconds;\r\n\r\n\t\ttotal_seconds = parseInt(Math.floor(miliseconds / 1000));\r\n\t\ttotal_minutes = parseInt(Math.floor(total_seconds / 60));\r\n\t\ttotal_hours = parseInt(Math.floor(total_minutes / 60));\r\n\t\tdays = parseInt(Math.floor(total_hours / 24));\r\n\r\n\t\tseconds = parseInt(total_seconds % 60);\r\n\t\tminutes = parseInt(total_minutes % 60);\r\n\t\thours = parseInt(total_hours % 24);\r\n\r\n\t\treturn hours+'ч. '+minutes+'мин.';\r\n\t}\r\n\t\r\n\tasync shareStory (add) {\r\n\t\ttry{\r\n\t\t\tthis.setState({ popout: <ScreenSpinner/>, screen: true });\r\n\t\t\tawait this.sleep(750);\r\n\t\t\tlet element = document.getElementById('main');\r\n\t\t\thtml2canvas(element, { allowTaint: true }).then(async canvas => {\r\n\t\t\t\tthis.setState({ screen: false });\r\n\t\t\t\tawait this.sleep(250);\r\n\t\t\t\tlet blob = canvas.toDataURL('image/png');\r\n\r\n\t\t\t\ttry{\r\n\t\t\t\t\tawait bridge.send('VKWebAppShowStoryBox', {\r\n\t\t\t\t\t\tbackground_type: 'image', blob, attachment: { url: 'https://vk.com/app' + app_id, text: 'open', type: 'url' }\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.setState({ shared: true });\r\n\t\t\t\t\tif(add){\r\n\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'balance' + prefix, value: (this.state.data['balance' + prefix] + 1).toString()});\r\n\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'share_story' + prefix, value: Date.now().toString() });\r\n\t\t\t\t\t\tawait this.updateStorage();\r\n\t\t\t\t\t}\r\n\t\t\t\t}catch (e) {}\r\n\t\t\t\tthis.setState({ popout: null });\r\n\t\t\t});\r\n\t\t}catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\tthis.setState({ snackbar:\r\n\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\tlayout='vertical'\r\n\t\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tОшибка\r\n\t\t\t\t\t</Snackbar>\r\n\t\t\t});\r\n\t\t\tthis.setState({ popout: null, screen: false });\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<View activePanel={this.state.activePanel} popout={this.state.popout}>\r\n\t\t\t\t<Panel id='main' style={{ zIndex: 1 }}>\r\n\t\t\t\t\t<div className={'animated-background'} style={{ width: '100vw', height: '100vh', background: this.state.screen && `url(${bg})` }}>\r\n\t\t\t\t\t\t<div id='bg_shapes'/>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t!this.state.screen && need_balance &&\r\n\t\t\t\t\t\t\t<div style={{ position: 'absolute', top: os === ANDROID ? '6vh' : '3vh', left: '6vw' }} className='centered'>\r\n\t\t\t\t\t\t\t\t<Headline weight='bold' style={{ color: 'white' }}>Баланс: { this.state.data['balance' + prefix] > 0 ? this.state.data['balance' + prefix] : 0 }</Headline><img style={{ marginLeft: 8 }} src={sugar} height={32}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<div className='absolute_centered' style={{ transform: 'translate(-50%, -70%)' }}>\r\n\t\t\t\t\t\t\t<div className={'centered_'} style={{ position: 'absolute', top: '10vh', width: '100%', color: 'white', textAlign: 'center' }}>\r\n\t\t\t\t\t\t\t\t<img src={cookieIcon} style={{ marginRight: 8, display: this.state.screen || need_balance && 'none' }} height={32}/>\r\n\t\t\t\t\t\t\t\t<Title level='1' style={{ fontFamily: 'Font', fontWeight: '400', letterSpacing: '2px', fontSize: '28px' }}>\r\n\t\t\t\t\t\t\t\t\t{!this.state.screen ?\r\n\t\t\t\t\t\t\t\t\t\tneed_balance ?\r\n\t\t\t\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t\t'Печенька'\r\n\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t'Моё предсказание из печеньки на сегодня'.toUpperCase()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</Title>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<Lottie style={{pointerEvents: 'none', zIndex: -1, opacity: this.state.showText && .5 }} options={{\r\n\t\t\t\t\t\t\t\tanimationData: animDataCookie,\r\n\t\t\t\t\t\t\t\trendererSettings: {\r\n\t\t\t\t\t\t\t\t\tpreserveAspectRatio: 'xMidYMid slice'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}} width={this.viewportToPixels('90vw')} isStopped={this.state.cookieAnimStarted}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: 'В ближайшее время ты подкачаешься!\\n' +\r\n\t\t\t\t\t\t\t\t\t'Отожмись 5 раз и прочти это еще раз...'.replace('\\n', '<br/>') }} />\r\n\t\t\t\t\t\t\t<div className='absolute_centered' style={{ backgroundImage: `url(${paper})`, backgroundRepeat: 'repeat', display: !this.state.showText && 'none', borderRadius: this.viewportToPixels('1vh') }}>\r\n\t\t\t\t\t\t\t\t<Headline weight='bold' style={{ padding: '16px', width: '70vw', textAlign: 'center' }}>{\r\n\t\t\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: this.state.phrases[random.int(0, this.state.phrases.length-1)].replace('\\n', '<br/>') }} />\r\n\t\t\t\t\t\t\t\t}</Headline>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t!this.state.screen &&\r\n\t\t\t\t\t\t\t\t<Button disabled={!this.state.cookieAnimStarted} size={'xl'} style={{ backgroundColor: 'white', color: 'black' }} onClick={async ()=>{\r\n\t\t\t\t\t\t\t\t\tif(need_balance){\r\n\t\t\t\t\t\t\t\t\t\tif(this.state.data['balance' + prefix] > 0){\r\n\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'balance' + prefix, value: (this.state.data['balance' + prefix] - 1).toString()});\r\n\t\t\t\t\t\t\t\t\t\t\tawait this.updateStorage();\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({ popout:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Alert\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactions={[{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Получить сахар',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tautoclose: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taction: async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ snackbar: null });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif((!this.state.data['share_story' + prefix] || ( this.state.data['share_story' + prefix] > 0 && Date.now() - this.state.data['share_story' + prefix] >= 24 * 60 * 60 * 1000 ) ) && this.state.showText){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('share_story');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait this.shareStory(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}else if(!this.state.data['allow_msg' + prefix]){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('allow_msg');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppAllowMessagesFromGroup', {group_id, key: 'dBuBKe1kFcdemzB'});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'balance' + prefix, value: (this.state.data['balance' + prefix] + 1).toString()});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'allow_msg' + prefix, value: 'true' });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait this.updateStorage();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ snackbar:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlayout='vertical'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tВы получили 1 сахар\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Snackbar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}catch (e) {}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}else if(!this.state.data['share_wall' + prefix]){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('share_wall');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppShowWallPostBox', {message: 'Открой свою печеньку 👉 vk.com/app' + app_id, attachments: 'photo-197650774_457239017'});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'balance' + prefix, value: (this.state.data['balance' + prefix] + 1).toString()});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'share_wall' + prefix, value: 'true' });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait this.updateStorage();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ snackbar:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlayout='vertical'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tВы получили 1 сахар\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Snackbar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}catch (e) {}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}else if(!this.state.data['sub_group' + prefix]){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('sub_group');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppJoinGroup', {group_id});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'balance' + prefix, value: (this.state.data['balance' + prefix] + 1).toString()});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'sub_group' + prefix, value: 'true' });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait this.updateStorage();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ snackbar:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlayout='vertical'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tВы получили 1 сахар\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Snackbar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}catch (e) {}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}else if(!this.state.data['allow_noty' + prefix]){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('allow_noty');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppAllowNotifications', {});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'balance' + prefix, value: (this.state.data['balance' + prefix] + 1).toString()});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'allow_noty' + prefix, value: 'true' });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait this.updateStorage();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ snackbar:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlayout='vertical'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tВы получили 1 сахар\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Snackbar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}catch (e) {}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait this.sleep(100);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ snackbar:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlayout='vertical'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tБесплатный сахар закончился. Возвращайтесь через 2 часа.\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Snackbar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={()=> this.setState({ popout: null })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className={'centered'} style={{ textAlign: 'center' }}><Title level={2} weight='bold'>Упс</Title><img src={e2} style={{ marginLeft: 8 }} height={24}/></span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className={'centered'} style={{ textAlign: 'center' }}><p>У Вас недостаточно</p><img src={sugar} height={32}/></span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tif(this.state.data['used3' + prefix] === false){\r\n\t\t\t\t\t\t\t\t\t\t\tif(!this.state.data['used1' + prefix]){\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('first open');\r\n\t\t\t\t\t\t\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppAllowMessagesFromGroup', {group_id, key: 'dBuBKe1kFcdemzB'});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}catch (e) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ snackbar:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlayout='vertical'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tНеобходимо сначала разрешить сообщения\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Snackbar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif(this.state.used){\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('two open');\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(!this.state.shared){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ snackbar:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlayout='vertical'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tНеобходимо сначала поделиться в истории\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Snackbar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif(this.state.three){\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('three open');\r\n\t\t\t\t\t\t\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppShowWallPostBox', {message: 'Открой свою печеньку 👉 vk.com/app' + app_id, attachments: 'photo-197650774_457239017'});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ three: false });\r\n\t\t\t\t\t\t\t\t\t\t\t\t}catch (e) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ snackbar:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlayout='vertical'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tНеобходимо сначала поделиться записью\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Snackbar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('four open');\r\n\t\t\t\t\t\t\t\t\t\t\tlet last = Date.now() - this.state.data['used3' + prefix];\r\n\t\t\t\t\t\t\t\t\t\t\tif(last < 2 * 60 * 60 * 1000) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('need wait 2h');\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ snackbar:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlayout='vertical'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tДля повтора подождите { this.convertMiliseconds(2 * 60 * 60 * 1000 - last) }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Snackbar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tif(!this.state.data['used1' + prefix]){\r\n\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'used1' + prefix, value: Date.now().toString()});\r\n\t\t\t\t\t\t\t\t\t\t}else if(!this.state.data['used2' + prefix]){\r\n\t\t\t\t\t\t\t\t\t\t\tif(this.state.three === null) this.setState({ three: true });\r\n\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'used2' + prefix, value: Date.now().toString()});\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'used3' + prefix, value: Date.now().toString()});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tawait this.updateStorage();\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tthis.setState({ cookieAnimStarted: false, showText: false });\r\n\t\t\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({ cookieAnimStarted: true, showText: true, used: true });\r\n\t\t\t\t\t\t\t\t\t}, 2250)\r\n\t\t\t\t\t\t\t\t}}>{ need_balance ? 'Разломить за 1 ' : this.state.showText ? 'Попробовать снова' : 'Разломить печеньку' } { need_balance && <img style={{ marginLeft: 8 }} src={sugar} height={32}/> }</Button>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.screen &&\r\n\t\t\t\t\t\t\t<div style={{ position: 'absolute', bottom: '18vh', width: '100vw' }} >\r\n\t\t\t\t\t\t\t\t<Title level={2} weight='semibold' style={{ color: 'white', width: '100vw', textAlign: 'center' }}>\r\n\t\t\t\t\t\t\t\t\t<span style={{ width: '80vw' }}>Переходи в приложение, чтобы получить предсказание</span>\r\n\t\t\t\t\t\t\t\t</Title>\r\n\t\t\t\t\t\t\t\t<br/><br/>\r\n\t\t\t\t\t\t\t\t<div className={'centered'}>\r\n\t\t\t\t\t\t\t\t\t<img crossOrigin={'anonymous'} style={{ transform: 'rotate(90deg)' }} height='26px' src={Icon16Chevron}/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t(this.state.showText) && !this.state.screen &&\r\n\t\t\t\t\t\t\t<div style={{ position: 'absolute' , bottom: os === ANDROID ? '8vh' : '3vh', width: '100vw', zIndex: 1 }}>\r\n\t\t\t\t\t\t\t\t<Button onClick={async ()=>{\r\n\t\t\t\t\t\t\t\t\tawait this.shareStory();\r\n\t\t\t\t\t\t\t\t}} style={{ background: '#ffffff00', color: 'white', fontSize: '20px', letterSpacing: '1px' }} before={<Icon28StoryOutline/>} size='xl'>Поделиться в истории</Button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t{this.state.snackbar}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Panel>\r\n\t\t\t</View>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}